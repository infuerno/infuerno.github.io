<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Pluralsight: Architecting Azure Solutions (70-534): Infrastructure and Networking</title>
		<meta name="description" content="There are 18 different shades of British Standard Toast">
		<meta name="generator" content="Eleventy v3.1.2">
		
		
		
		<style>/* This is an arbitrary CSS string added to the bundle */
/* Defaults */
:root {
	--font-family: -apple-system, system-ui, sans-serif;
	--font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono, Lucida Console, Lucida Sans Typewriter,
		DejaVu Sans Mono, Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New, Courier, monospace;
}

/* Theme colors */
:root {
	--color-gray-10: #f7f7f7;
	--color-gray-15: #f0f0f0;
	--color-gray-20: #e0e0e0;
	--color-gray-30: #d0d0d0;
	--color-gray-40: #dedede;
	--color-gray-50: #c0c0c0;
	--color-gray-60: #b0b0b0;
	--color-gray-70: #a0a0a0;
	--color-gray-90: #333;

	--background-color: #fff;
	--text-color: var(--color-gray-90);

	--text-color-link-header: #082840;
	--text-color-link-active-header: #5f2b48;
	--text-color-link-visited-header: #17050f;
	--text-color-link: #27c0df;
	--text-color-link-visited: #27c0df;
	--text-color-link-active: #21daff;

	--text-color-link: #08cb00;
	--text-color-link-visited: #253900;
	--text-color-link-active: #09ff00;
	--text-color-code: #efe;

	--syntax-tab-size: 2;
}

@media (prefers-color-scheme: dark) {
	:root {
		--color-gray-20: #e0e0e0;
		--color-gray-50: #c0c0c0;
		--color-gray-90: #dad8d8;

		/* --text-color is assigned to --color-gray-_ above */
		--text-color-link: #1493fb;
		--text-color-link-active: #6969f7;
		--text-color-link-visited: #a6a6f8;

		--background-color: #15202b;
	}
}

/* Global stylesheet */
* {
	box-sizing: border-box;
}

@view-transition {
	navigation: auto;
}

html,
body {
	padding: 0;
	margin: 0 auto;
	font-family: var(--font-family);
	color: var(--text-color);
	background-color: var(--background-color);
	line-height: 1.5;
}
html {
	overflow-y: scroll;
}
body {
	max-width: 50em;
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden:not(:focus):not(:active) {
	clip: rect(0 0 0 0);
	clip-path: inset(50%);
	height: 1px;
	overflow: hidden;
	position: absolute;
	white-space: nowrap;
	width: 1px;
}

/* Fluid images via https://www.zachleat.com/web/fluid-images/ */
img {
	max-width: 100%;
}
img[width][height] {
	height: auto;
}
img[src$=".svg"] {
	width: 100%;
	height: auto;
	max-width: none;
}
video,
iframe {
	width: 100%;
	height: auto;
}
iframe {
	aspect-ratio: 16/9;
}

p:last-child {
	margin-bottom: 0;
}
/* added to body instead */
/* p {
	line-height: 1.5;
}

li {
	line-height: 1.5;
} */

header a[href] {
	color: var(--text-color-link-header);
}
header a[href]:visited {
	color: var(--text-color-link-visited-header);
}
header a[href]:hover,
header a[href]:active {
	color: var(--text-color-link-active-header);
}

a[href] {
	color: var(--text-color-link);
}
a[href]:visited {
	color: var(--text-color-link-visited);
}
a[href]:hover,
a[href]:active {
	color: var(--text-color-link-active);
}

main,
footer {
	padding: 1rem;
}
main :first-child {
	margin-top: 0;
}

header {
	border-bottom: 1px dashed var(--color-gray-20);
}

#skip-link {
	text-decoration: none;
	background: var(--background-color);
	color: var(--text-color);
	padding: 0.5rem 1rem;
	border: 1px solid var(--color-gray-90);
	border-radius: 2px;
}

/* Prevent visually-hidden skip link fom pushing content around when focused */
#skip-link.visually-hidden:focus {
	position: absolute;
	top: 1rem;
	left: 1rem;
	/* Ensure it is positioned on top of everything else when it is shown */
	z-index: 999;
}

.links-nextprev {
	display: flex;
	justify-content: space-between;
	gap: 0.5em 1em;
	list-style: "";
	border-top: 1px dashed var(--color-gray-20);
	padding: 1em 0;
}
.links-nextprev > * {
	flex-grow: 1;
}
.links-nextprev-next {
	text-align: right;
}

table {
	margin: 1em 0;
}
table td,
table th {
	padding-right: 1em;
}

pre,
code {
	font-family: var(--font-family-monospace);
}
:not(pre) > code {
	border: 1px solid #e8e8e8;
	border-radius: 3px;
	background-color: #eef;
	background-color: #cceeff;
	background-color: var(--text-color-code);
}
pre:not([class*="language-"]) {
	margin: 0.5em 0;
	line-height: 1.375; /* 22px /16 */
	-moz-tab-size: var(--syntax-tab-size);
	-o-tab-size: var(--syntax-tab-size);
	tab-size: var(--syntax-tab-size);
	-webkit-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
	direction: ltr;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	overflow-x: auto;
	background-color: #eef;
	background-color: #cceeff;
	background-color: var(--text-color-code);
	padding: 1em;
	border-radius: 0.3em;
}
code {
	word-break: break-all;
}

/* Header */
header {
	display: flex;
	gap: 1em;
	flex-wrap: wrap;
	justify-content: space-between;
	align-items: center;
	padding: 1em;
}
.home-link {
	flex-grow: 1;
	font-size: 1.2em; /* 16px /16 */
	font-weight: 700;
}
.home-link:link:not(:hover) {
	text-decoration: none;
}

/* Nav */
.nav {
	display: flex;
	gap: 0.5em 1em;
	padding: 0;
	margin: 0;
	list-style: none;
}
.nav-item {
	display: inline-block;
}
.nav-item a[href]:not(:hover) {
	text-decoration: none;
}
.nav a[href][aria-current="page"] {
	text-decoration: underline;
}

/* Posts list */
.postlist {
	counter-reset: start-from var(--postlist-index);
	list-style: none;
	padding: 0;
	padding-left: 1.5rem;
}
.postlist-item {
	display: flex;
	flex-wrap: wrap;
	align-items: baseline;
	counter-increment: start-from -1;
	margin-bottom: 1em;
}
.postlist-item:before {
	display: inline-block;
	pointer-events: none;
	content: "" counter(start-from, decimal-leading-zero) ". ";
	line-height: 100%;
	text-align: right;
	margin-left: -1.5rem;
}
.postlist-date,
.postlist-item:before {
	font-size: 0.8125em; /* 13px /16 */
	color: var(--color-gray-90);
}
.postlist-date {
	word-spacing: -0.5px;
	padding-left: 5px;
}
.postlist-link {
	font-size: 1.1875em; /* 19px /16 */
	font-weight: 700;
	flex-basis: calc(100% - 1.5rem);
	padding-left: 0.25em;
	padding-right: 0.5em;
	text-underline-position: from-font;
	text-underline-offset: 0;
	text-decoration-thickness: 1px;
}
.postlist-item-active .postlist-link {
	font-weight: bold;
}

/* Tags */
.post-tag {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	text-transform: capitalize;
	font-style: italic;
}
.postlist-item > .post-tag {
	align-self: center;
}

/* Tags list */
.post-metadata {
	display: inline-flex;
	flex-wrap: wrap;
	gap: 0.5em;
	list-style: none;
	padding: 0;
	margin: 0;
}
.post-metadata time {
	margin-right: 1em;
}

blockquote {
	border-left: 4px solid var(--color-gray-20);
	margin-left: 0;
	margin-right: 0;
	padding-left: 1em;
	color: var(--color-gray-70);
	letter-spacing: -1px;
	font-style: italic;
	font-size: 1.05em;
}

table {
	margin-bottom: 30px;
	width: 100%;
	text-align: left;
	color: var(--color-gray-90);
	border-collapse: collapse;
	/*border: 1px solid #e8e8e8;*/
}

table tr:nth-child(even) {
	background-color: var(--color-gray-10);
}

table th,
table td {
	padding: 10px 15px;
}

table th {
	background-color: var(--color-gray-15);
	border: 1px solid var(--color-gray-40);
	border-bottom-color: var(--color-gray-60);
}

table td {
	border: 1px solid var(--color-gray-20);
}
/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #8292a2;
}

.token.punctuation {
	color: #f8f8f2;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
	--eleventy-code-padding: 1.25em;
	padding-left: var(--eleventy-code-padding);
	padding-right: var(--eleventy-code-padding);
}
.token.deleted {
	background-color: hsl(0, 51%, 37%);
	color: inherit;
}
.token.inserted {
	background-color: hsl(126, 31%, 39%);
	color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
	-webkit-user-select: none;
	user-select: none;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding-top: 2px;
	padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
	width: var(--eleventy-code-padding);
	background-color: rgba(0,0,0,.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
	display: block;
	margin-left: calc(-1 * var(--eleventy-code-padding));
	margin-right: calc(-1 * var(--eleventy-code-padding));
	text-decoration: none; /* override del, ins, mark defaults */
	color: inherit; /* override del, ins, mark defaults */
}</style>
		
		<script defer="" data-domain="infuerno.github.io" src="https://plausible.dot.kitchen/js/plausible.js"></script>
	</head>
	<body>
		<a href="#main" id="skip-link" class="visually-hidden">Skip to main content</a>

		<header>
			<a href="/" class="home-link">infuerno.github.io</a>
			<nav>
				<h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
				<ul class="nav">
					<li class="nav-item"><a href="/">Home</a></li>
					<li class="nav-item"><a href="/about/">About</a></li>
				</ul>
			</nav>
		</header>

		<main id="main">
			<heading-anchors>
				


<h1 id="pluralsight-architecting-azure-solutions-70-534-infrastructure-and-networking">Pluralsight: Architecting Azure Solutions (70-534): Infrastructure and Networking</h1>

<ul class="post-metadata">
	<li><time datetime="2016-12-03">03 December 2016</time></li>
</ul>

<h2 id="azure-data-centres">Azure Data Centres</h2>
<p><a href="https://azurespeedtest.azurewebsites.net">https://azurespeedtest.azurewebsites.net</a> - speed test to show closest data centre
<a href="https://azure.microsoft.com/en-gb/regions/services/">https://azure.microsoft.com/en-gb/regions/services/</a> - shows the services available in each data centre - some services not available - check first</p>
<h3 id="affinity-groups">Affinity groups</h3>
<p>Resources placed in the same affinity group are placed in proximity to each other in an Azure data centre. This minimises latency.
Modular blade server either in <em>compute</em> or <em>storage</em> role. There are approximately 40 to 50 blade servers in each rack. Each rack has a special switch on top which connects to aggregation switches to ensure connectivity between each rack. Some racks have a fabric controller which provisions new VMs, heals VMs etc. Racks are organised into 20 rack groups called a stamp or a cluster. All hardware in a stamp uses the same processor generation. All resources in the same affinity group use the same stamp.</p>
<h3 id="further-reading">Further reading</h3>
<p>Mastering Microsoft Azure Infrastructure Services by John Savill</p>
<h2 id="regions">Regions</h2>
<p>A region (e.g. Europe North) will have multiple data centres in close proximity.
Some regions can only be used by customers with a billing address in those regions (e.g. Australian regions)</p>
<h3 id="regional-datacentres">Regional datacentres</h3>
<p>Datacentres are divided into clusters of 20 racks. Each rack functions as a fault domain.  <em>Availability sets</em>  keep virtual machines available during downtime. This needs to be designed by the customer. Availability sets need to be configured for each tier of the application to qualify for the 99.95% Azure SLA.</p>
<h2 id="azure-active-directory">Azure Active Directory</h2>
<p>Reference: Pluralsight: Extending Active Directory to the Cloud by Russell Smith</p>
<h3 id="ad-ds-on-iaas">AD DS on IaaS</h3>
<p>Simplest way to have active directory in Azure. Basically Active Directory on a VM running as a domain controller in the cloud.</p>
<ul>
<li>Create an Azure network</li>
<li>Configure a Site to Azure VPN</li>
<li>Configure a static IP address on the Azure network</li>
<li>Deploy a Windows Server VM</li>
<li>Promote to Domain Controller
When does this way, the cloud just becomes another AD site. BUT this is less necessary with Azure AD.</li>
</ul>
<h3 id="azure-ad">Azure AD</h3>
<p>Azure AD is a Directory server for Azure services and applications, but running as a service rather than a VM.</p>
<p>Azure AD is available in 3 editions:</p>
<ul>
<li>Free: comes with Office 365, Microsoft Intune, not used with Azure</li>
<li>Basic: group based management, self service password reset, AD application proxy, access to Azure Console</li>
<li>Premium: multi-factor authentication, Microsoft Identity Manager use rights, passord reset write back, access to Azure Console, Health reports</li>
</ul>
<p>Supports multiple directories, and a single directory can support multiple domains (actually “domain names”, rather than domains, which can be associated with that directory)</p>
<h3 id="directory-synchronisation">Directory Synchronisation</h3>
<p>Allows you to synchronise users and groups from on premise AD to Azure AD.
Done using “Azure AD Connect”. Previous to July 2015, DirSync, Azure AD Sync.
Install Azure AD Connect on a domain controller. Enter credentials for Azure (an account which only has access to one directory, if there are multiple) and credentials for the local domain (no doubt a domain admin is required).</p>
<h2 id="azure-ad-domain-services-october-2015-public-preview">Azure AD Domain Services (October 2015 Public Preview)</h2>
<p>Azure hosted AD for use with applications and VMs. Replacement for an Azure hosted DC VM. Can function as a full DNS server. Works with Azure AD Connect.
So you no longer need to have a DC in Azure - you can use Azure AD DS as a service.</p>
<ol>
<li>In the Directory - click Enable Domain Services for this directory - need to select an existing Virtual Network to project this into, click save</li>
<li>An IP is assigned as a DNS server - represents the domain controller</li>
<li>Go to the virtual network and enter the DNS server IP as the DNS server</li>
<li>Create a VM, ensure it is created as part of the same Virtual Network used above</li>
<li>Log on as the local administrator (still a standalone virtual machine at this point in time)</li>
<li>Check ipconfig / all to ensure the DNS server is correct</li>
<li>PC -&gt; Properties -&gt; Advanced System Settings -&gt; Computer Name -&gt; Change -&gt; Enter domain name e.g. <a href="http://ps.microsofton.com">ps.microsofton.com</a> -&gt; enter account with domain admin privileges</li>
</ol>
<h2 id="static-ip-addresses">Static IP Addresses</h2>
<h3 id="references">References</h3>
<p>Pluralsight: Connecting PowerShell to your Azure Subscription by Russell Smith
Pluralsight: Applied Windows Azure by Vishwas Lele
Pluralsight: Microsoft Azure for Enterprises: What and Why by David Chappell
Pluralsight: Implementing Cloud Service for Azure Infrastructure (70-533) by Razi Rais</p>
<h3 id="internal-ip-address">Internal IP address</h3>
<p><code>$Vm = Get-AzureVm -ServiceName vm1 -Name vm1</code>
<code>SetAzureStaticVNetIP -Vm $Vm -IPAddress 10.0.0.10 | Update-AzureVm</code></p>
<p>Triggering an update of the VM reboots it</p>
<h3 id="reserved-public-ip-address">Reserved Public IP Address</h3>
<p>Can only do via PowerShell, only 20 per subscription, assigned to the service NOT the individual VM, costs money</p>
<p><code>New-AzureReservedIP -ReservedIPName res-ip-001 -Location &quot;Central-US&quot;</code></p>
<h3 id="instance-level-public-ip-address">Instance Level Public IP Address</h3>
<p>A public IP address which can be assigned to a VM or role instance, formerly known as a PIP (Public IP), 5 per subscription, cannot reserve it, just get it when assigned to the VM, doen’t replace the Virtual IP assigned to a service (?). VM will always have that public IP address assigned to it. Again, costs money.</p>
<p><code>Set-AzurePublicIP</code></p>
<h2 id="azure-acls-old-way">Azure ACLs (old way)</h2>
<p>Allows you to block or allow IPv4 address ranges to a particular endpoint. 50 rules allowed per endpoint. Only inbound.</p>
<p><code>Set-AzureAclConfig -AddRule</code></p>
<h2 id="network-security-groups-new-way">Network Security Groups (new way)</h2>
<p>Contain both inbound and outbound rules to allow or deny traffic based on:</p>
<ul>
<li>Traffic direction</li>
<li>Protocol</li>
<li>Source address and port</li>
<li>Destination address and port</li>
</ul>
<p>Traffic must match an Allow rule for it to be permitted. (Different from ACLs.)
Not supported on the same VM instance with Azure ACLs.</p>
<p>Source and destination prefix:</p>
<ul>
<li>IP Address e.g. 192.168.0.1</li>
<li>Range e.g. 192.168.15.0/24</li>
<li>Default tag e.g. VIRTUAL_NETWORK, AZURE_LOADBALANCER, INTERNET</li>
</ul>
<h3 id="default-rules">Default rules</h3>
<p>NSGs contain <em>default</em> rules which cannot be deleted, but have the lowest possible priority. There are 3 default inbound rules and 3 default outbound rules.</p>
<h3 id="associations">Associations</h3>
<ul>
<li>NSG to VM</li>
<li>NSG to NIC on a VM (if multiple NICs on a VM)</li>
<li>NSG to Subnet - applies to all VMs on an Azure Subnet</li>
<li>Can only apply one NSG to a VM, to a NIC or to a Subnet. If there are NSGs applied to a VM, its NIC and the Subnet it is in, then all three NSGs will come into play in that order</li>
<li>Conversely, the same NSG can be applied to multiple resources</li>
</ul>
<h2 id="vms">VMs</h2>
<h3 id="iaas-vm-limits">IaaS VM Limits</h3>
<ul>
<li>Maximum of 50 Azure VMs per “cloud service”</li>
<li>Maximum of 150 input endpoints per “cloud service”</li>
<li>100 VMs per availability set</li>
</ul>
<h3 id="key-vm-iaas-questions">Key VM IaaS questions</h3>
<ul>
<li>CPU / RAM / NIC / Temp disk / Data disk requirements</li>
<li>Cache size</li>
<li>Max data disk IOPS/Bandwidth</li>
</ul>
<p>Basic Tier: A-Series - good for POCs
Standard Tier: A-Series - last 4 (A8 to A11) have better hardware (though not SSDs)
Standard Tier: D-Series - Faster processors, higher memory-to-core ratio and an SSD temp disk, OS still on regular HDD
Standard Tier: Dv2-Series - 35% faster processor than D-Series
Standard Tier: DS-Series - High perforance, low latency, SSDs for VM disk</p>

<ul class="links-nextprev"><li class="links-nextprev-prev">← Previous<br> <a href="/2016/06/15/pluralsight-git-fundamentals/">Pluralsight: Git Fundamentals</a></li><li class="links-nextprev-next">Next →<br><a href="/2016/12/18/manning-learn-active-directory-management-in-a-month-of-lunches/">Manning: Learn Active Directory Management in a Month of Lunches</a></li>
</ul>

			</heading-anchors>
		</main>

		<footer>
			<p>
				<em>Built with <a href="https://www.11ty.dev/">Eleventy v3.1.2</a></em>
			</p>
		</footer>

		<!-- This page `/2016/12/03/pluralsight-architecting-azure-solutions/` was built on 2025-09-06T21:44:14.127Z -->
		<script type="module" src="/dist/xbxy_EL6cU.js"></script>
	</body>
</html>
